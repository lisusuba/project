<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>找代跑</title>
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="stylesheet" href="css/bootstrap.min.css">  
		<link rel="stylesheet" href="css/mobhomepage.css"/>
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<style>
			body{
				background-color: gainsboro;
			}
			.con
			{   
				 width:60px;
				 height:60px; 
				 border:1px solid gainsboro; 
				 position:fixed; position:absolute; 
				 bottom:30px; 
				 right:50px; 
				 padding: 4px;
			 }
			  .con2
			 {   
		     	   width:93%;
				   height:60px; 
				   border:1px solid gainsboro; 
				   position:fixed; _position:absolute; 
				   bottom:10px; 
			       right:50px; 
				   padding: 4px;
			  }
	</style>
	</head>
	<body>
		<div class="con">
			<div class="con2">
				<ul id="mytab" class="nav nav-pills nav-justified" role="tablist">
					<li role="presentation" ><a href="mobhomepage.html">首页</a></li>
					<li role="presentation" ><a href="mobfind1.html">代取快递</a></li>
					<li role="presentation" ><a href="mobfind2.html">周边代购</a></li>
					<li role="presentation" class="active"><a href="#">周边代跑</a></li>
				</ul>
			</div>
		</div>
		<div class="con1">
			<span class="label label-info">你想做什么</span>	
			<div class="input-group">
				<span class="input-group-addon"><font style="color: red;">非必填</font></span>
				<input type="text" id="express_name" class="form-control" placeholder="可以输入快递公司名称如：邮政快递。或者取一个东西：如取一个箱子"/>
			</div>
			<span class="label label-info">取件处信息</span>
			<div class="input-group">
				<span class="input-group-addon"><font color="red">*</font>取件出地址：</span>
				<input type="text" id="send_address" class="form-control" placeholder="联系人地址" data-toggle="tooltip"  title="此项为必填项"/>
				<span class="input-group-addon"><a onclick="select_address()">地址簿</a></span>
			</div>
			<div class="input-group">
				<span class="input-group-addon">联系人姓名：</span>
				<input type="text" id="send_name" class="form-control" placeholder="联系人姓名" data-toggle="tooltip"  title="此项为必填项"/>
			</div>
			<div class="input-group">
				<span class="input-group-addon"><font color="red">*</font>联系人电话：</span>
				<input type="text" id="send_phone" class="form-control" placeholder="联系人电话" data-toggle="tooltip"  title="此项为必填项"/>
			</div>
			<div class="container">
				<div class="col-xs-4 col-xs-offset-6"><img src="img/down.png" /></div>
			</div>
			<span class="label label-info">收件人信息</span>
			<div class="input-group">
				<span class="input-group-addon"><font color="red">*</font>收件人地址：</span>
				<input type="text" id="recipienter_address" class="form-control" placeholder="收件人地址" data-toggle="tooltip"  title="此项为必填项"/>
				<span class="input-group-addon"><a onclick="select_address1()">地址簿</a></span>
			</div>
			<div class="input-group">
				<span class="input-group-addon">收件人姓名：</span>
				<input type="text" id="recipienter_name" class="form-control" placeholder="收件人姓名" data-toggle="tooltip"  title="此项为必填项"/>
			</div>
			<div class="input-group">
				<span class="input-group-addon"><font color="red">*</font>收件人电话：</span>
				<input type="text" id="recipienter_phone" class="form-control" placeholder="收件人电话" data-toggle="tooltip"  title="此项为必填项"/>
			</div>
			<br />
			<div>
				<button type="button" class="btn btn-success btn-block" onclick="success()">发布订单</button>
			</div>
		</div>
	</body>
	<script>
		var goods_type="3";//1为代取快递，2为周边代购，3为代跑
		var name;
		var phone;
		var address;
		var searchUrl =window.location.href;
		var searchData =searchUrl.split("="); //截取 url中的“=”,获得“=”后面的参数
		var name1 =decodeURI(searchData[1]).trim();
		var phone1 =decodeURI(searchData[2]).trim();
		var address1 =decodeURI(searchData[3]).trim();
		var express_name =decodeURI(searchData[4]).trim();
		var express_phone =decodeURI(searchData[5]).trim();
		var express_address =decodeURI(searchData[6]).trim();
		var issend=decodeURI(searchData[7]).trim();
		if(issend=="0")
		{
			if(name1=="undefined")
			{
				document.getElementById("send_name").value="";
			}
			else
			{
				document.getElementById("send_name").value=name1;
			}
			if(address1=="undefined")
			{
				document.getElementById("send_address").value="";
			}
			else
			{
				document.getElementById("send_address").value=address1;
			}
			if(phone1=="undefined")
			{
				document.getElementById("send_phone").value="";
			}
			else
			{
				document.getElementById("send_phone").value=phone1;
			}
			if(express_address=="undefined")
			{
				document.getElementById("recipienter_address").value="";
			}
			else
			{
				document.getElementById("recipienter_address").value=express_address;
			}
			if(express_name=="undefined")
			{
				document.getElementById("recipienter_name").value="";
			}
			else
			{
				document.getElementById("recipienter_name").value=express_name;
			}
			if(express_phone=="undefined")
			{
				document.getElementById("recipienter_phone").value="";
			}
			else
			{
				document.getElementById("recipienter_phone").value=express_phone;
			}
		}
		else
		{
			if(name1=="undefined")
			{
				document.getElementById("recipienter_name").value="";
			}
			else
			{
				document.getElementById("recipienter_name").value=name1;
			}
			if(address1=="undefined")
			{
				document.getElementById("recipienter_address").value="";
			}
			else
			{
				document.getElementById("recipienter_address").value=address1;
			}
			if(phone1=="undefined")
			{
				document.getElementById("recipienter_phone").value="";
			}
			else
			{
				document.getElementById("recipienter_phone").value=phone1;
			}
			if(express_address=="undefined")
			{
				document.getElementById("send_address").value="";
			}
			else
			{
				document.getElementById("send_address").value=express_address;
			}
			if(express_name=="undefined")
			{
				document.getElementById("send_name").value="";
			}
			else
			{
				document.getElementById("send_name").value=express_name;
			}
			if(express_phone=="undefined")
			{
				document.getElementById("send_phone").value="";
			}
			else
			{
				document.getElementById("send_phone").value=express_phone;
			}
		}
		$(function () { $("[data-toggle='tooltip']").tooltip(); });
		function select_address()
		{
			name=document.getElementById("recipienter_name").value.trim();
			phone=document.getElementById("recipienter_phone").value.trim();
			address=document.getElementById("recipienter_address").value.trim();
			var url="myaddress.html"+"?"+"="+name+"="+phone+"="+address+"="+"3"+"="+"0"; 
			var Url=encodeURI(url);
			window.location.assign(Url);
		}
		function select_address1()
		{
			name=document.getElementById("send_name").value.trim();
			phone=document.getElementById("send_phone").value.trim();
			address=document.getElementById("send_address").value.trim();
			var url="myaddress.html"+"?"+"="+name+"="+phone+"="+address+"="+"3"+"="+"1"; 
			var Url=encodeURI(url);
			window.location.assign(Url);
		}
		function success()
		{
			var goods_description = document.getElementById("express_name").value.trim();//快递公司名称
			var fromname = document.getElementById("send_name").value.trim();
			var fromphone= document.getElementById("send_phone").value.trim();
			var fromaddress = document.getElementById("send_address").value.trim();
			var toname = document.getElementById("recipienter_name").value.trim();
			var tophone = document.getElementById("recipienter_phone").value.trim();
			var toaddress = document.getElementById("recipienter_address").value.trim();
			var req={};
			req.fromaddress=fromaddress;
			req.goods_description=goods_description;//快递公司名称
			req.toname=toname;
			req.tophone=tophone;
			req.toaddress=toaddress;
			req.fromname=fromname;
			req.fromphone=fromphone;
			req.goods_type=goods_type;
			if(fromaddress=="")
			{
				alert("你的地址不能为空")
				return;
			}
			else if(fromphone=="")
			{
				alert("你的电话不能为空");
				return;
			}
			else if(toaddress =="")
			{
				alert("收件人地址不能为空");
				return;
			}
			else if(tophone=="")
			{
				alert("收件人电话不能为空");
				return;
			}
			$.ajax({
				type:"POST",
				url:"Sending",
				async:true,
				data: req,              /*附加请求参数*/
				dataType: 'json',       /*期望服务器返回的数据类型*/
				success:function(resp){ /*已经将服务器返回的数据转换成JS对象*/
					console.log(resp);
					if(resp.flag1==true)
					      alert('发布成功');
					else
					      alert("发布失败");
				 }
			});
		}
	</script>
</html>
